<ul v-if="postList.length" class='post__list-container' infinite-scroll-disabled="disabledLoad"
    v-infinite-scroll="loadMorePost">
  <li v-for='(item, index) in postList' :key='item' class='post__list-item'>
    <h2 class='post__title'>\{{item.title}}</h2>
    <div class='post__info-container flex'>
      <el-avatar :size="50" :src="item.profilePic" alt="avatar"></el-avatar>
      <span class='post__user-info'>
        <div class='user-info__username'>\{{item.name}}</div>
        <div class='user-info__time'>\{{item.createTime}}</div>
      </span>
      <div class="tag-container">
        <span v-for="topic in item.topicsList" :key="topic._id" class='post__tag aside-h'
              :style="{'--color': `rgb(${topic.color})`, '--bg': `rgba(${topic.color}, .3)`}">\{{topic.title}}</span>
      </div>
    </div>
    <article class='post__content' :class="{omit: showMoreDetailIndex !== index}" v-html="item.content">
    </article>
    <div class='post__operation-container flex'>
      <el-button type="info" class="aside-h" size="mini" round @click="handleSeeMore(index, item._id)">
        \{{showMoreDetailIndex === index ? 'Hide' : 'See More'}}
      </el-button>
      <i v-if="auth" class="iconfont post__operation-like" :class="item.popularity ? 'icon-like-fill' : 'icon-like'"
         @click="handleLikes(index, item._id)"></i>
    </div>
    <el-form v-if="auth" inline :model="comment" class="form__comment flex">
      <el-form-item class="form-item__input">
        <el-input v-model="comment.body" placeholder="Add a comment"></el-input>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="handleSubmitComment" circle>
          <i class="iconfont icon-send"></i>
        </el-button>
      </el-form-item>
    </el-form>

    <div class="post__comment-container">
      <div class="comment__bar" @click="showComment = showComment === index ? null : index">
        <i class="iconfont icon-down" :data-show-list="showComment === index"></i>
      </div>
      <el-collapse-transition>
        {{> home/CommentList}}
      </el-collapse-transition>
    </div>
  </li>
</ul>
<el-empty v-else></el-empty>